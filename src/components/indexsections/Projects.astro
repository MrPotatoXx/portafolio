---
import Section from "@/components/Section.astro";
import type { Messages } from "@/i18n";

interface Props {
  t: Messages;
  cv: any;
}

const { t, cv } = Astro.props as Props;
const projects = cv.projects as Array<{
  url: string;
  description: string;
  highlights: string[];
  name: string;
  isActive: boolean;
}>;
---

<Section title={t.sections.projects}>
  <div class="max-w-3xl mx-auto w-full bg-gradient-to-br from-slate-800/80 to-slate-900/80 rounded-2xl shadow-xl border-2 border-sky-900/30 p-4 md:p-6 mb-4">
    <ul class="grid grid-cols-1 sm:grid-cols-2 gap-8">
      {
        projects.map(
          ({ url, description, highlights, name, isActive }: { url: string; description: string; highlights: string[]; name: string; isActive: boolean; }, index: number) => (
            <li
              class={`bg-gradient-to-br from-slate-800/80 to-slate-900/80 shadow-xl border-2 border-sky-900/30 rounded-2xl p-4 md:p-6 flex flex-col h-full transition-transform duration-300 hover:scale-[1.03] hover:shadow-2xl text-sm md:text-base ${projects.length % 2 !== 0 && index === projects.length - 1 ? "sm:col-start-1 sm:col-span-2" : ""}`}
            >
              <article class="flex flex-col h-full">
                <header class="flex-grow">
                  <h3 class="mb-2 text-2xl font-bold text-sky-300 flex flex-wrap items-center gap-2">
                    <a
                      href={url}
                      title={t.projects.seeProject(name)}
                      class="hover:underline hover:text-cyan-300 transition-colors"
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      {name}
                    </a>
                    {isActive ? (
                      <span class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-500/20 text-green-400 text-xs font-semibold rounded-full animate-pulse">
                        <span class="w-2 h-2 bg-green-400 rounded-full"></span>{t.projects.active}
                      </span>
                    ) : (
                      <span class="inline-flex items-center gap-1 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs font-semibold rounded-full">
                        <span class="w-2 h-2 bg-red-400 rounded-full"></span>{t.projects.inactive}
                      </span>
                    )}
                  </h3>
                  <p class="text-base text-gray-300 mb-2">{description}</p>
                </header>
                <footer class="flex flex-wrap gap-2 text-sm justify-center align-center pt-4">
                  {highlights.map((highlight) => (
                    <span class="bg-gradient-to-r from-sky-400/20 to-cyan-400/20 text-sky-200 border border-sky-500/30 rounded-full py-1 px-4 font-medium shadow-sm hover:bg-sky-400/40 transition-all duration-200 text-xs md:text-sm max-w-full text-center flex items-center justify-center">
                      {highlight}
                    </span>
                  ))}
                </footer>
              </article>
            </li>
          ),
        )
      }
    </ul>
  </div>
</Section>
